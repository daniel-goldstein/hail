<!DOCTYPE html>
<html>
    <head>
        <script src="https://cjrtnc.leaningtech.com/3_20231220_323/cj3loader.js"></script>
        <script src="https://cdn.jsdelivr.net/pyodide/dev/full/pyodide.js"></script>
        <script type="module">
            await cheerpjInit();

            let cj = await cheerpjRunLibrary('/app/build/libs/hail-all-spark.jar');
            const LocalBackend = await cj.is.hail.backend.local.LocalBackend;
            globalThis.backend = await new LocalBackend("/files/tmp");

            let pyodide = await loadPyodide();

            await pyodide.runPythonAsync(`
                from js import backend
                print(await backend.getFlag("rng_nonce"))
                five = await backend.parse_value_ir("(I32 5)")
                print(await five.toString())
            `);
        </script>
    </head>
    <body>
        <p>Hello!</p>
    </body>
</html>
